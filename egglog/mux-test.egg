(include "./churchroad.egg")

;; counter_memblock example (2x4 memblock)

(let tmp76 (Wire "tmp76" 1))
(let tmp64 (Wire "tmp64" 1))
(let tmp70 (Wire "tmp70" 1))
(let tmp18_o (Wire "tmp18_o" 1))
(let reg_tmp243 (Wire "reg_tmp243" 2))
(let tmp227 (Wire "tmp227" 1))
(let tmp32_o (Wire "tmp32_o" 1))
(let raddr_0 (Wire "raddr_0" 1))
(let tmp196 (Wire "tmp196" 1))
(let tmp214 (Wire "tmp214" 1))
(let tmp202 (Wire "tmp202" 1))
(let tmp208 (Wire "tmp208" 1))
(let tmp21_o (Wire "tmp21_o" 1))
(let reg_tmp240 (Wire "reg_tmp240" 2))
(let tmp50 (Wire "tmp50" 1))
(let tmp14_o (Wire "tmp14_o" 1))
(let tmp44 (Wire "tmp44" 1))
(let tmp111 (Wire "tmp111" 1))
(let tmp233 (Wire "tmp233" 1))
(let raddr_1 (Wire "raddr_1" 1))
(let tmp98 (Wire "tmp98" 1))
(let tmp117 (Wire "out__tmp117" 1))
(let tmp104 (Wire "tmp104" 1))
(let tmp25_o (Wire "tmp25_o" 1))
(let tmp5_o (Wire "tmp5_o" 1))
(let reg_tmp246 (Wire "reg_tmp246" 2))
(let tmp28_o (Wire "tmp28_o" 1))
(let reg_tmp249 (Wire "reg_tmp249" 2))
(let tmp56 (Wire "tmp56" 1))
(let tmp10_o (Wire "tmp10_o" 1))
(let tmp96 (Wire "out__tmp96" 1))
(let tmp83 (Wire "tmp83" 1))
(let tmp90 (Wire "tmp90" 1))
(let tmp221 (Wire "tmp221" 1))
(union tmp76 (Op2 (Or) tmp64 tmp70))
(union tmp18_o (Op1 (Extract 1 1) reg_tmp243))
(union tmp227 (Op2 (And) tmp32_o raddr_0))
(union tmp196 (Op1 (Not) raddr_0))
(union tmp214 (Op2 (Or) tmp202 tmp208))
(union tmp21_o (Op1 (Extract 0 0) reg_tmp240))
(union tmp50 (Op2 (And) tmp14_o raddr_0))
(union tmp14_o (Op1 (Extract 0 0) reg_tmp243))
(union tmp44 (Op2 (And) tmp21_o tmp196))
(union tmp111 (Op2 (And) tmp233 raddr_1))
(union tmp98 (Op1 (Not) raddr_1))
(union tmp117 (Op2 (Or) tmp104 tmp111))
(union tmp25_o (Op1 (Extract 1 1) reg_tmp240))
(union tmp5_o (Op1 (Extract 0 0) reg_tmp246))
(union tmp64 (Op2 (And) tmp25_o tmp196))
(union tmp28_o (Op1 (Extract 0 0) reg_tmp249))
(union tmp56 (Op2 (Or) tmp44 tmp50))
(union tmp10_o (Op1 (Extract 1 1) reg_tmp246))
(union tmp70 (Op2 (And) tmp18_o raddr_0))
(union tmp208 (Op2 (And) tmp28_o raddr_0))
(union tmp96 (Op2 (Or) tmp83 tmp90))
(union tmp221 (Op2 (And) tmp10_o tmp196))
(union tmp233 (Op2 (Or) tmp221 tmp227))
(union tmp202 (Op2 (And) tmp5_o tmp196))
(union tmp104 (Op2 (And) tmp76 tmp98))
(union tmp32_o (Op1 (Extract 1 1) reg_tmp249))
(union tmp83 (Op2 (And) tmp56 tmp98))
(union tmp90 (Op2 (And) tmp214 raddr_1))

(delete (Wire "tmp76" 1))
(delete (Wire "tmp64" 1))
(delete (Wire "tmp70" 1))
(delete (Wire "tmp18_o" 1))
(delete (Wire "tmp227" 1))
(delete (Wire "tmp32_o" 1))
(delete (Wire "tmp196" 1))
(delete (Wire "tmp214" 1))
(delete (Wire "tmp202" 1))
(delete (Wire "tmp208" 1))
(delete (Wire "tmp21_o" 1))
(delete (Wire "tmp50" 1))
(delete (Wire "tmp14_o" 1))
(delete (Wire "tmp44" 1))
(delete (Wire "tmp111" 1))
(delete (Wire "tmp233" 1))
(delete (Wire "tmp98" 1))
(delete (Wire "out__tmp117" 1))
(delete (Wire "tmp104" 1))
(delete (Wire "tmp25_o" 1))
(delete (Wire "tmp5_o" 1))
(delete (Wire "tmp28_o" 1))
(delete (Wire "tmp56" 1))
(delete (Wire "tmp10_o" 1))
(delete (Wire "out__tmp96" 1))
(delete (Wire "tmp83" 1))
(delete (Wire "tmp90" 1))
(delete (Wire "tmp221" 1))

(run-schedule (repeat 150 (saturate core typing misc) (saturate decomp)))

;; output read data wires
(query-extract tmp96)  ;; index 0
(query-extract tmp117) ;; index 1

